{% extends "base.html" %}

{% block title %}Sem Acesso{% endblock %}

{% block page_title %}Acesso Negado{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto text-center py-12">
    <!-- Icon -->
    <div class="w-32 h-32 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-8">
        <i class='bx bx-lock-alt text-6xl text-red-600 dark:text-red-400'></i>
    </div>

    <!-- Title -->
    <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
        Acesso Negado ðŸš«
    </h1>

    <!-- Message -->
    <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">
        VocÃª nÃ£o possui acesso a nenhuma account no momento. 
        Entre em contato com um administrador para obter as permissÃµes necessÃ¡rias.
    </p>

    <!-- User Info -->
    <div class="bg-gray-50 dark:bg-zinc-800 rounded-lg p-6 mb-8">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            Suas InformaÃ§Ãµes
        </h2>
        <div class="space-y-2 text-sm">
            <div class="flex justify-between">
                <span class="text-gray-500 dark:text-gray-400">Nome:</span>
                <span class="text-gray-900 dark:text-white">{{ current_user_full_name }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-500 dark:text-gray-400">Email:</span>
                <span class="text-gray-900 dark:text-white">{{ current_user.email }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-500 dark:text-gray-400">Tipo de UsuÃ¡rio:</span>
                <span class="text-gray-900 dark:text-white">{{ current_user_role|title }}</span>
            </div>
            <div class="flex justify-between">
                <span class="text-gray-500 dark:text-gray-400">Accounts AcessÃ­veis:</span>
                <span class="text-red-600 dark:text-red-400 font-medium">0</span>
            </div>
        </div>
    </div>

    <!-- Actions -->
    <div class="space-y-4">
        <!-- Contact Admin -->
        <div class="bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2">
                ðŸ’¬ Precisa de Acesso?
            </h3>
            <p class="text-blue-700 dark:text-blue-300 mb-4">
                Entre em contato com um administrador do sistema para solicitar acesso a uma account.
            </p>
            <div class="flex flex-col sm:flex-row gap-3 justify-center">
                <a href="mailto:admin@ceotur.com?subject=SolicitaÃ§Ã£o de Acesso&body=OlÃ¡, gostaria de solicitar acesso ao sistema. Meus dados: Nome: {{ current_user_full_name }}, Email: {{ current_user.email }}" 
                   class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    <i class='bx bx-envelope mr-2'></i>
                    Enviar Email
                </a>
                <button onclick="copyUserInfo()" 
                        class="inline-flex items-center px-4 py-2 border border-blue-300 text-blue-700 dark:text-blue-300 dark:border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-800 transition-colors">
                    <i class='bx bx-copy mr-2'></i>
                    Copiar Dados
                </button>
            </div>
        </div>

        <!-- Help -->
        <div class="bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-green-800 dark:text-green-200 mb-2">
                ðŸ“š Precisa de Ajuda?
            </h3>
            <p class="text-green-700 dark:text-green-300 mb-4">
                Consulte nossa documentaÃ§Ã£o para entender como funciona o sistema de accounts.
            </p>
            <div class="flex flex-col sm:flex-row gap-3 justify-center">
                <a href="{{ url_for('main.help') }}" 
                   class="inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                    <i class='bx bx-help-circle mr-2'></i>
                    Ver DocumentaÃ§Ã£o
                </a>
                <a href="https://docs.ceotur.com" target="_blank"
                   class="inline-flex items-center px-4 py-2 border border-green-300 text-green-700 dark:text-green-300 dark:border-green-600 rounded-lg hover:bg-green-50 dark:hover:bg-green-800 transition-colors">
                    <i class='bx bx-link-external mr-2'></i>
                    Suporte Online
                </a>
            </div>
        </div>

        <!-- Profile -->
        <div class="bg-purple-50 dark:bg-purple-900 border border-purple-200 dark:border-purple-700 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-purple-800 dark:text-purple-200 mb-2">
                ðŸ‘¤ Gerenciar Perfil
            </h3>
            <p class="text-purple-700 dark:text-purple-300 mb-4">
                Enquanto aguarda o acesso, vocÃª pode atualizar suas informaÃ§Ãµes pessoais.
            </p>
            <a href="{{ url_for('main.profile') }}" 
               class="inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                <i class='bx bx-user mr-2'></i>
                Editar Perfil
            </a>
        </div>

        <!-- Debug Info (sÃ³ para super admin) -->
        {% if is_super_admin %}
        <div class="bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2">
                ðŸ”§ Debug (Super Admin)
            </h3>
            <p class="text-yellow-700 dark:text-yellow-300 mb-4">
                Como Super Admin, vocÃª deveria ter acesso a todas as accounts. Isso pode ser um erro.
            </p>
            <div class="flex flex-col sm:flex-row gap-3 justify-center">
                <a href="{{ url_for('main.debug_accounts') }}" 
                   class="inline-flex items-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors">
                    <i class='bx bx-bug mr-2'></i>
                    Ver Debug
                </a>
                <a href="{{ url_for('super_admin.dashboard') }}" 
                   class="inline-flex items-center px-4 py-2 border border-yellow-300 text-yellow-700 dark:text-yellow-300 dark:border-yellow-600 rounded-lg hover:bg-yellow-50 dark:hover:bg-yellow-800 transition-colors">
                    <i class='bx bx-crown mr-2'></i>
                    Super Admin
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Logout -->
        <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
            <a href="{{ url_for('auth.logout') }}" 
               class="inline-flex items-center px-6 py-3 border border-red-300 text-red-700 dark:text-red-400 dark:border-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900 transition-colors">
                <i class='bx bx-log-out mr-2'></i>
                Sair do Sistema
            </a>
        </div>
    </div>

    <!-- Footer Info -->
    <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
        <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-2">
            Como Funciona o Sistema de Accounts?
        </h4>
        <div class="text-sm text-gray-600 dark:text-gray-400 space-y-2">
            <p>â€¢ Cada account Ã© um ambiente isolado com seus prÃ³prios usuÃ¡rios e dados</p>
            <p>â€¢ VocÃª precisa ser adicionado a uma account por um administrador</p>
            <p>â€¢ Super Admins tÃªm acesso a todas as accounts do sistema</p>
            <p>â€¢ UsuÃ¡rios normais sÃ³ veem as accounts Ã s quais foram adicionados</p>
        </div>
    </div>
</div>

<script>
    function copyUserInfo() {
        const userInfo = `Nome: {{ current_user_full_name }}
Email: {{ current_user.email }}
Tipo: {{ current_user_role|title }}
Data: ${new Date().toLocaleString('pt-BR')}`;

        navigator.clipboard.writeText(userInfo).then(function() {
            // Show success message
            const button = event.target.closest('button');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="bx bx-check mr-2"></i>Copiado!';
            button.classList.add('bg-green-600', 'text-white');
            button.classList.remove('border-blue-300', 'text-blue-700', 'hover:bg-blue-50');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('bg-green-600', 'text-white');
                button.classList.add('border-blue-300', 'text-blue-700', 'hover:bg-blue-50');
            }, 2000);
        }).catch(function(err) {
            console.error('Erro ao copiar: ', err);
            alert('Erro ao copiar informaÃ§Ãµes');
        });
    }
</script>
{% endblock %}